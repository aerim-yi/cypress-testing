/// Test for clicking through collections 
describe('Collections pop-up confirm', () => {

    function loginPageCheck() {
        cy.get('[data-test-id="signinButton"]').should('exist').and('contain.text', 'sign in');
      }
    
    it('Should navigate to collections, while not logged in', () => {
      // Initial Setup
      cy.visit('/');
      cy.navigateNavBar('collections');
      cy.login();

      loginPageCheck();
    })

    it('Should navigate to collections, click on one item logged in and details should display', () => {
      // Initial Setup
      cy.visit('/');
      cy.navigateNavBar('collections');
      cy.login();

      cy.get('.deck-card app-card');
      expect(cy.get('.deck-card app-card')).to.include('[class="cerberusModal__content"]')
    })

    it('Should navigate to collections, click on all items on page and details should display', () => {
      // Initial Setup
      cy.visit('/');
      cy.navigateNavBar('collections');
      cy.login();
      
      cy.get('.deck-card app-card').each(($el) => {
        let clickedCardState = cy.wrap($el).click();
        expect(clickedCardState).to.include('[class="cerberusModal__content"]');
        cy.get('cerberus-inventory-card-modal .closeIcon').click();
      })
    })

    it('Should navigate to collections, click page button random number of times, and should still work', () => {
      // Initial Setup
      cy.visit('/');
      cy.navigateNavBar('collections');
      cy.login();

      // Find Number of pages
      let pageString = 
        cy.get('[class="paginationArea"]')
          .find('_ngcontent-blk-c100')
          .find('[class="currentPageText"]').text()
      let pageNumber = pageString.split(' ')[3].trim();
      let randomPageClick = Math.floor(Math.random() * parseInt(pageNumber));

      // Click pages number of times 
      let nextPage = cy.get('[class="paginationArea"]')
        .find('_ngcontent-blk-c100')
        .find('[class="paginationIcon paginationIcon--right"]')
      for (let i = 0; i++; i < randomPageClick){      
          nextPage.click();
      }

      // Iterate over that particular page 
      cy.get('.deck-card app-card').each(($el) => {
        let clickedCardState = cy.wrap($el).click();
        expect(clickedCardState).to.include('[class="cerberusModal__content"]');
        cy.get('cerberus-inventory-card-modal .closeIcon').click();
      })
      })
    })
